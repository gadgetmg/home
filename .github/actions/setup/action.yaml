name: setup
description: setup

runs:
  using: composite
  steps:
  - name: Install Nix
    uses: nixbuild/nix-quick-install-action@1f095fee853b33114486cfdeae62fa099cda35a9 # v33
  - name: Load Nix environment
    uses: nicknovitski/nix-develop@9be7cfb4b10451d3390a75dc18ad0465bed4932a # v1.2.1
    with:
      arguments: .#ci
  - name: Cache Task checksums
    uses: actions/cache@0057852bfaa89a56745cba8c7296529d2fc39830 # v4.3.0
    with:
      path: ./.task/
      key: .task-${{ github.ref_name }}-${{ hashFiles('**/*') }}
      restore-keys: |
        .task-${{ github.ref_name }}-
        .task-
