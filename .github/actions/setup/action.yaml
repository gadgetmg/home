name: setup
description: setup

runs:
  using: composite
  steps:
  - name: Install Nix
    uses: nixbuild/nix-quick-install-action@2c9db80fb984ceb1bcaa77cdda3fdf8cfba92035 # v34
  - name: Load Nix environment
    uses: nicknovitski/nix-develop@9be7cfb4b10451d3390a75dc18ad0465bed4932a # v1.2.1
    with:
      arguments: .#ci
  - name: Cache Task checksums
    uses: actions/cache@cdf6c1fa76f9f475f3d7449005a359c84ca0f306 # v5.0.3
    with:
      path: ./.task/
      key: .task-${{ github.ref_name }}-${{ hashFiles('**/*') }}
      restore-keys: |
        .task-${{ github.ref_name }}-
        .task-
