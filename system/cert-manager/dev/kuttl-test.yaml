apiVersion: kuttl.dev/v1beta1
kind: TestSuite
startControlPlane: true
testDirs:
- ../base/tests/unit
- tests/unit
timeout: 1
commands:
  # renovate: datasource=github-releases depName=prometheus-operator/kube-prometheus
- command: kubectl apply -f https://github.com/prometheus-operator/kube-prometheus/raw/v0.13.0/manifests/setup/0servicemonitorCustomResourceDefinition.yaml
  timeout: 30
- script: kustomize build --enable-helm | kfilt -i kind=CustomResourceDefinition | kubectl apply -f -
  timeout: 30
- script: kustomize build --enable-helm | kfilt -x kind=CustomResourceDefinition | kubectl apply -f -
  timeout: 30
suppress:
- events
namespace: default
