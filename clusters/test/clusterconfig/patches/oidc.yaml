# yaml-language-server: $schema=https://raw.githubusercontent.com/siderolabs/talos/refs/heads/release-1.11/website/content/v1.11/schemas/config.schema.json
cluster:
  apiServer:
    extraArgs:
      oidc-issuer-url: https://auth.10.5.0.54.nip.io/realms/home
      oidc-client-id: kubernetes
      oidc-username-claim: email
      oidc-groups-claim: groups
      oidc-ca-file: /var/local/oidc/ca.crt
    extraVolumes:
    - hostPath: /var/local/oidc
      mountPath: /var/local/oidc
      readonly: true
machine:
  files:
  - path: /var/local/oidc/ca.crt
    op: create
    permissions: 0o644
    content: |
      -----BEGIN CERTIFICATE-----
      MIIC9jCCAd6gAwIBAgIQP4+SQLR122JhTuRugtZD3DANBgkqhkiG9w0BAQsFADAV
      MRMwEQYDVQQDEwpjbHVzdGVyLWNhMB4XDTI1MDIwMzIyNDk1N1oXDTM1MDIwMTIy
      NDk1N1owFTETMBEGA1UEAxMKY2x1c3Rlci1jYTCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBAObf1ex0Uv586wdShBQHMVKHsTRZa9wmER64efRONfvpFXDL
      3u24Xf1FOnpy4++iqHOtKwauw2K2g6pg/dnfhovBfmsD5a/m/rP3PWDSrcZNpoIX
      O45cDFoa/WSQiiYZc8cWT2iQEnXXE8A+E0EjeiCG6HQICJ8H01uEJFZIrAzmjTTM
      4E4AaKYoYbvo0BLwXhBxvk0+b6curZAPoTbh6l3WaRWPtsY5tB18gXxpPOC6tMoZ
      U61e5RKqIhIf/LK9Nh3eC6gtNR8/ixCuPgtKTL2olwQybY89G2U4rgxW2E9SEkgQ
      dpKth1DUvTViTqL6IPKY3xXdhVVG4eIs4Fl+xXcCAwEAAaNCMEAwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFJgWG8AiXb7uQLK4xKZl
      enGCVAJrMA0GCSqGSIb3DQEBCwUAA4IBAQAeuWV4IGI+5goY/rfFI6B05uhgtOm4
      +JE5VmJLyLYT0sK65DpVEQuSKM/+nFaoVP9h06FgjW6cqWxrUIfDYZZtZySyMxAj
      FiERhIAdETLonTcMzbS2h2DWLQKCg94aCLJhZSbWiWNDrOVpe0NZ7yrpG3hwKc5w
      jH97TUCA+tPwNsQHAp5NGFdecTbvLAIig1MnPtZQhQHAO63U+NfnIH8J+C8DqcsT
      eSumd3aIEsxeresDpsPw629MJj7462VxsPVX9dPdTOwUBx0jd+UJhx4LSPi7sur+
      cUjOaFkPk5DZl3pWp93sGQWjXDF7++R+7jJg47APTkwaiCudFL+74q0j
      -----END CERTIFICATE-----
