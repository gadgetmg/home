kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  # renovate: datasource=docker depName=kindest/node
  image: kindest/node:v1.29.0
  kubeadmConfigPatches:
  - |
    kind: ClusterConfiguration
    apiServer:
      extraArgs:
        admission-control-config-file: /etc/config/admission-control.yaml
      extraVolumes:
      - name: config
        hostPath: /etc/config
        mountPath: /etc/config
        readOnly: false
        pathType: DirectoryOrCreate
  extraMounts:
  - hostPath: kind-config
    containerPath: /etc/config
    readOnly: true
  - hostPath: ../
    containerPath: /tmp/local-repo
    readOnly: true
  - hostPath: containerd.service
    containerPath: /etc/systemd/system/containerd.service
    readOnly: true
networking:
  disableDefaultCNI: true
